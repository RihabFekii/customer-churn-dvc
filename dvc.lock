schema: '2.0'
stages:
  split_data:
    cmd: python3 src/stages/split_data.py
    deps:
    - path: data/raw/Churn_Modelling.csv
      md5: 7321aa9a1e24a9e139f42124f736b415
      size: 684858
    - path: src/stages/split_data.py
      md5: c385050d6db4688c8c704c3214c6db89
      size: 1933
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          random_state: 0
        data:
          raw_data_dir: data/raw
          data_file_name: Churn_Modelling.csv
          cat_cols:
          - Geography
          - Gender
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          target_col: Exited
        data_split:
          processed_data_dir: data/processed
          test_size: 0.2
    outs:
    - path: data/processed/x_test.csv
      md5: 2ba3777247f8d6acffc4ab3f380024cd
      size: 89780
    - path: data/processed/x_train.csv
      md5: 17c6aa69d7801f401ef8864e1582b5ef
      size: 359519
    - path: data/processed/y_test.csv
      md5: 9be527e40370ba22fc5035a11df0264d
      size: 4007
    - path: data/processed/y_train.csv
      md5: d653339d94651a1afebbe925acf037a8
      size: 16007
  train:
    cmd: python3 src/stages/train.py
    deps:
    - path: data/processed/x_train.csv
      md5: 17c6aa69d7801f401ef8864e1582b5ef
      size: 359519
    - path: data/processed/y_train.csv
      md5: d653339d94651a1afebbe925acf037a8
      size: 16007
    - path: src/stages/train.py
      md5: 8aa3fb5b242c904df379b24a8ae4fd23
      size: 2533
    params:
      params.yaml:
        data:
          raw_data_dir: data/raw
          data_file_name: Churn_Modelling.csv
          cat_cols:
          - Geography
          - Gender
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          target_col: Exited
        data_split:
          processed_data_dir: data/processed
          test_size: 0.2
        train:
          model_dir: models
          model_type: XGBClassifier
          train_params:
            learning_rate: 0.2
            max_depth: 5
            n_estimators: 200
    outs:
    - path: models/model.pkl
      md5: 29af4812c220c6bf0b9103c4d6b962b9
      size: 414702
  eval:
    cmd: python3 src/stages/evaluate.py
    deps:
    - path: data/processed/x_test.csv
      md5: 2ba3777247f8d6acffc4ab3f380024cd
      size: 89780
    - path: data/processed/y_test.csv
      md5: 9be527e40370ba22fc5035a11df0264d
      size: 4007
    - path: models/model.pkl
      md5: 29af4812c220c6bf0b9103c4d6b962b9
      size: 414702
    - path: src/stages/evaluate.py
      md5: aac589cffd9826a87e572a75438f9921
      size: 2296
    outs:
    - path: reports/confusion_matrix.png
      md5: b76c0ee0fd0b01f8d23c4c5ec3230bba
      size: 16486
    - path: reports/metrics.json
      md5: 12fc1f35ecdfeeba835cb523063d3c28
      size: 109
